(function(){define("R",{string:{test:"this is a test!",start_timer_msg:"::: timer start :::",pause_timer_msg:"::: timer pause :::",stop_timer_msg:"::: timer stop :::",incr_tag_msg:"::: increment complited :::",enable_sound:"<b class='red'>Enable</b> sound alarm",disable_sound:"<b class='red'>Disable</b> sound alarm"},"int":{default_time:15e5,steps:25},path:{icon:"images/tomato-products-clock-",default_icon:"images/logo19.png",alarm_sound:"sounds/alarm-clock.mp3"},id:void 0,key:{start_timer:"start",pause_timer:"pause",stop_timer:"stop",update_timer:"clock",end_timer:"end",resume_timer:"resume",persistence_tag:"tag_io",persistence_current_tag:"current_tag_io",persistence_sound_check:"sound_check",play_clock:"play",stop_clock:"stop"}})}).call(this),function(){define("EventEmitter",[],function(){return{on:function(e,t){return document.addEventListener(e,function(e){return t(e.detail)},!1)},trigger:function(e,t){var n;return n=new CustomEvent(e,{detail:t}),document.dispatchEvent(n)}}})}.call(this),function(){define("ConnectionManager",["R","EventEmitter"],function(e,t){var n;return n=null,{send:function(){return n.postMessage.apply(n,arguments)},init:function(){return $(document).ready(function(){return n=chrome.runtime.connect(),n.onMessage.addListener(function(n){console.log(n);switch(n.type){case e.key.resume_timer:return t.trigger(e.key.resume_timer,n);case e.key.update_timer:return t.trigger(e.key.update_timer,n);case e.key.end_timer:return t.trigger(e.key.end_timer,n)}})})}}})}.call(this),function(){define("Clock",["R"],function(e){var t,n,r,i,s;return s=":",t=null,i=e.int.default_time/1e3,$(document).ready(function(){return t=$(".clock")}),n=function(e){return e<10?"0".concat(e):""+e},r=function(e){var t,r,i;return t=Math.floor(e%31536e3%86400/3600),r=Math.floor(e%31536e3%86400%3600/60),i=e%31536e3%86400%3600%60,(t>0?n(t)+s:"")+(n(r)+s)+n(i)},{update:function(e){if(!!t)return t.text(r(i-e))},reset:function(){if(!!t)return t.text(r(i))}}})}.call(this),function(){define("_",[],function(){return{getSize:function(e){var t,n;console.log(e),t=0;for(n in e)e.hasOwnProperty(n)&&t++;return t}}})}.call(this),function(){define("TagIO",["R"],function(e){return{saveAll:function(t,n){var r;return r={},r[e.key.persistence_tag]=JSON.stringify(t),n==null&&(n=function(){}),chrome.storage.sync.set(r,n)},loadAll:function(t){return chrome.storage.sync.get(e.key.persistence_tag,function(n){var r;return n[e.key.persistence_tag]?r=JSON.parse(n[e.key.persistence_tag]):r={},typeof t=="function"?t(r):void 0})},incr:function(e,t){var n=this;return this.loadAll(function(r){return r[e]!=null?r[e]++:r[e]=1,n.saveAll(r,t)})},remove:function(e,t){var n=this;return this.loadAll(function(r){if(r[e]!=null)return delete r[e],n.saveAll(r,t)})},saveCurrent:function(t,n){var r;return r={},r[e.key.persistence_current_tag]=t,n==null&&(n=function(){}),chrome.storage.sync.set(r,n)},loadCurrent:function(t){return chrome.storage.sync.get(e.key.persistence_current_tag,function(n){if(n[e.key.persistence_current_tag]==null)return;return t(n[e.key.persistence_current_tag])})}}})}.call(this),function(){define("Tag",["R","_","TagIO","EventEmitter"],function(e,t,n,r){var i,s,o,u,a;return a=null,i=s=o=null,u=function(e,t){var r,u;return u=$("<tr><td>"+e+"</td><td>"+t+"</td></tr>"),u.find("td").addClass("clickable").click(function(){return i.val(e),o.click()}),r=$('<i class="tag-del uk-icon-remove-sign"></i>').click(function(){$(this).parent().parent().remove(),n.remove(e),console.log(s.children().size());if(s.children().size()===0)return o.addClass("hidden")}),u.append($('<td class="tag-del-container">').append(r)),s.append(u)},{disable:function(){return i.attr("disabled","")},enable:function(){return i.removeAttr("disabled")},isDisabled:function(){return i.attr("disabled")!=null},getValue:function(){return i.val()},switchList:function(){return s.children().length>0?s.children().remove():(s.addClass("uk-animation-slide-left").addClass("hidden"),n.loadAll(function(e){var t,n;for(t in e)n=e[t],u(t,n);return s.removeClass("hidden")}))},init:function(){var u;return u=this,$(document).ready(function(){return i=$(".current-tag"),o=$(".tags-btn"),n.loadAll(function(e){if(t.getSize(e)>0)return o.removeClass("hidden")}),s=$(".tags").find("tbody"),o.click(function(){return u.switchList()}),r.on(e.key.play_clock,function(){return u.disable(),n.saveCurrent(i.val())}),r.on(e.key.stop_clock,function(){return u.enable(),i.val("")}),r.on(e.key.end_timer,function(){return u.enable(),i.val("")}),r.on(e.key.resume_timer,function(e){return u.disable(),n.loadCurrent(function(e){return i.val(e)})})})}}})}.call(this),function(){define("Player",["R","EventEmitter","ConnectionManager","Clock","Tag"],function(e,t,n,r,i){var s,o,u,a,f,l,c;return s=o=null,l=function(){return s.removeClass("play").addClass("pause").children().removeClass("uk-icon-play").addClass("uk-icon-pause")},f=function(){return s.removeClass("pause").addClass("play").children().removeClass("uk-icon-pause").addClass("uk-icon-play")},c=function(){return s.hasClass("pause")&&f(),r.reset()},u=function(){if(s.hasClass("play"))return n.send({type:e.key.start_timer,time:e.int.default_time,tag:i.getValue()}),l(),t.trigger(e.key.play_clock);if(s.hasClass("pause"))return n.send({type:e.key.pause_timer}),f()},a=function(){return n.send({type:e.key.stop_timer}),c(),t.trigger(e.key.stop_clock)},{init:function(){return $(document).ready(function(){return s=$(".play").click(u),o=$(".stop").click(a),t.on(e.key.resume_timer,function(e){return e.paused?f():l(),r.update(e.secs)}),t.on(e.key.update_timer,function(e){return r.update(e.secs)}),t.on(e.key.end_timer,function(e){return c()})})}}})}.call(this),function(){define("AppStateIO",["R"],function(e){return{saveSoundCheck:function(t,n){var r;return r={},r[e.key.persistence_sound_check]=t,n==null&&(n=function(){}),chrome.storage.sync.set(r,n)},loadSoundCheck:function(t){return chrome.storage.sync.get(e.key.persistence_sound_check,function(n){return t(n[e.key.persistence_sound_check])})}}})}.call(this),function(){define("SoundCheck",["R","AppStateIO"],function(e,t){var n,r;return n=null,r=function(t){return t?e.string.disable_sound:e.string.enable_sound},{init:function(){var e;return e=this,$(document).ready(function(){return n=$(".sound-btn"),t.loadSoundCheck(function(e){return n.html(r(e)),n.click(function(){return e=!e,$(this).html(r(e)),t.saveSoundCheck(e)})})})}}})}.call(this),function(){var e=[].slice;require.config({paths:{R:"core/data/Resources",Quotes:"core/data/Quotes",_:"core/common/Utils",EventEmitter:"core/common/EventEmitter",ConnectionManager:"view/ConnectionManager",TagIO:"core/persistence/TagIO",AppStateIO:"core/persistence/AppStateIO",Player:"view/Player",Clock:"view/Clock",Tag:"view/Tag",SoundCheck:"view/SoundCheck"}}),require(["Player","Tag","SoundCheck","ConnectionManager"],function(){var t,n,r,i,s;n=1<=arguments.length?e.call(arguments,0):[],s=[];for(r=0,i=n.length;r<i;r++)t=n[r],s.push(typeof t.init=="function"?t.init():void 0);return s})}.call(this),define("init",function(){});